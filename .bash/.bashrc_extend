alias gc='git commit'
alias gs='git status'
alias gr='cd $(git rev-parse --show-toplevel)'

alias rsrc='source ~/.bashrc && source ~/.bash/.bashrc_extend'

alias vimrc='vim ~/.vimrc'
alias vimswp='cd ~/.vim/swap'

alias t='TERM=xterm-256color tmux'
alias ts='tmux list-sessions'
alias ta='tmux attach -t'

alias f='find . -name'

complete -o default -F _ts ta

_ts() {
  comp=$(tmux ls | cut -d ':' -f 1)
  for c in $comp; do
    COMPREPLY+=("$c")
  done
}

# funny name to avoid name-space collision
le_git_main() {
  echo $(git symbolic-ref refs/remotes/origin/HEAD | grep -o "\w\+$")
}

gu() {
  git checkout $(le_git_main) && git pull && prune
}


srch() {
  history | grep $1 | vim -
}

for s in $(ls ~/.bash/*.sh); do
  source $s
done

alias d='docker'
alias dc='docker-compose'
alias k='kubectl'

complete -o default -F __start_kubectl k


dsh() {
  docker exec -it $1 sh
}

__dsh() {
  if [[ $1 != $3 ]]; then
    return
  fi
  for id in $(docker ps -q | grep "^$2"); do
    COMPREPLY+=("$id")
  done
}

complete -F __dsh dsh

if [ -z $(which "python3.7") ]; then
  alias p=python3
else
  alias p='python3.7' #Some things about python I do not like.
fi

# Punch related alias
alias wt='workingtime'

eval $(ssh-agent -s) > /dev/null

# Accept EULA for running qlik dockers
export ACCEPT_EULA=yes

#Gogogogo things
export GOPATH=~/go

if [ -d "$GOPATH/bin" ] ; then
    PATH="$GOPATH/bin:$PATH"
fi

#Linuxbrew
BREW_BIN="/home/linuxbrew/.linuxbrew/bin"
if [ -d $BREW_BIN ]; then
  PATH="$PATH:$BREW_BIN"
fi

# Corectl tab completion
if [ $(which corectl) ]; then
  . <(corectl completion bash)
  # alias
  alias qcc=corectl
  complete -o default -F __start_corectl qcc
fi

if [ $(which kubectl) ]; then
  . <(kubectl completion bash)
fi

if [ $(which helm) ]; then
  . <(helm completion bash)
fi

if [ $(which qlik) ]; then
  . <(qlik completion bash)
fi


alias janson='python -i ~/hax/toolkit/janson.py'
alias deps='python3.7 -i ~/hax/toolkit/deps.py'

alias server='python -m SimpleHTTPServer'

export HISTCONTROL=ignorespace

export CORECTL_PATH=/home/qlik/gits/oss/corectl

export HELM_EXPERIMENTAL_OCI=1

# Customize bash prompt
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]dxa@lnx\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
